def total_lit_tiles(grid, start):
    beams = [start]
    energized = {}
    while True:
        new_beams = []
        for beam in beams:
            y = beam[0]
            x = beam[1]
            dir = beam[2]
            if x < 0 or x >= len(grid[0]) or y < 0 or y >= len(grid):
                continue
            if (y, x) not in energized:
                energized[(y, x)] = []
            if dir in energized[(y, x)]:
                continue
            energized[(y, x)].append(dir)
            char = grid[y][x]
            if dir % 2 == 0 and char in '|/\\':
                if (dir == 0 and char in '/|') or (dir == 2 and char in '|\\'):
                    new_beams.append((y - 1, x, 3))
                if (dir == 0 and char in '|\\') or (dir == 2 and char in '/|'):
                    new_beams.append((y + 1, x, 1))
                continue
            if dir % 2 == 1 and char in '-/\\':
                if (dir == 1 and char in '/-') or (dir == 3 and char in '-\\'):
                    new_beams.append((y, x - 1, 2))
                if (dir == 1 and char in '-\\') or (dir == 3 and char in '/-'):
                    new_beams.append((y, x + 1, 0))
                continue
            dx = 1 if dir == 0 else -1 if dir == 2 else 0
            dy = 1 if dir == 1 else -1 if dir == 3 else 0
            new_beams.append((y + dy, x + dx, dir))
        if len(new_beams) == 0:
            break
        beams = new_beams
    return len(energized.keys())

def solve(puzzle_input):
    grid = [[x for x in y] for y in puzzle_input.strip().split("\n")]

    print(total_lit_tiles(grid, (0, 0, 0)))

    max_total = 0
    for x in range(0, len(grid[0])):
        max_total = max(max_total, total_lit_tiles(grid, (0, x, 1)))
        max_total = max(max_total, total_lit_tiles(grid, (len(grid) - 1, x, 3)))
    for y in range(0, len(grid)):
        max_total = max(max_total, total_lit_tiles(grid, (y, 0, 0)))
        max_total = max(max_total, total_lit_tiles(grid, (y, len(grid[0]) - 1, 2)))
    print(max_total)

    return

solve('''
\\..\\.|.........|..|................................................................./.-............./-....../.
............../..--.../...................-....|.......................\\../...|..-....\\...-|...-...........\\..
.......\\......................................|..-\\.................-..-......................................
........\\..............|......................\\........./..............................|..............||......
.........|........|......-...........|....../....-.../.....|/.........-..../.../..........................|...
..\\............................./\\............................................................................
........|....................\\............................./.....|\\|..-....../............/..-..........\\.....
...\\.........................\\.............|.........../..............-..../.............../-.................
.||....../..............\\.|...............-......................|-..-......../.|.............................
...|.|.....-...../.............-............./............\\.\\/........|.............................\\|.-..\\.-.
............./....................|.......|.....\\..\\..............................-.../....|..................
./......./.|...............\\................................................||................................
......\\......|.................|........../......|\\|.......-|..................|.....-.-.||../.\\..............
................../...............|.....\\........-...-.\\...||..\\...........\\............|.........|...........
...-........|\\|........././/............|...........\\.../\\...|.......-........\\....................-..........
..../...........\\.........................../......-.|...................................../..\\........|......
\\...............\\/......./........-..............|..............--........../....|..-.\\...........-........./.
..........\\........\\|.........|\\.........../........................../.........|............\\..........|.....
...........\\....|/.|..........-..............-....-|...\\..........-.../............./.........................
..\\..\\......../...\\\\....................../...../.........................|.....\\..............|..\\...-.......
...........................-./...................................-/.\\.....\\...................\\.../...........
..-..................|..................-...\\.......|../............./|-............/........|.......|..-.....
...........-......................-.................|............../.......-./..........|....../..............
.........|.............././...............|..../..............|.........|.....|..\\......................|.....
......./-/...................\\\\..\\......|........................\\...\\....../.....................|...-.......
.....|.......................|............|...|........|...........-....../..................-...-............
.../................../......|...........................-............|.............-........./............|..
.-.........|.............|-...../..............................\\................|........................../..
.........../.........-.......|..-.........................-...............-...-.../...................../.....
../.......-../....................-...\\...\\........................-.............-...\\...../.|.........../....
............-...............|........................................../...\\.|....|........-.....\\|...........
.....................|\\............................-..-....../..-|..../..................\\................\\...
.\\.................-......\\...|............................./......./.........-............../................
.\\.........././............../|......\\/..............\\........................|........................|...-..
.............../.........|.................................-.......\\\\.\\-..........-......................./-..
-.|......................|.............|............................/....................|...........-........
../.....-.......|.....-.....\\.../\\........|.............|.........\\./..//\\................|.........-.....||..
.\\..\\.......|......./............\\..\\.........../........-.../.|..............-..../....\\.........../.\\.\\.....
.............|..........|.........|.|...\\-......................-..............|.../............./.........|..
....|................................................../...........-......-/......................-.....-.....
............................./.........-............................./..................\\..........\\..../.....
.....|.....................-.........../.......|..................-.......\\...|\\...|......\\.....\\...|.........
........|............../..../|.|......-................|...../..........|................|...................-
....../.....//..........\\.-|......|.....|..................../..............|.................................
\\.-...-....\\..................\\....................|............||............................../.............
............................-|...-...........-.../......-.........\\..-...|.|\\..........-...............\\.|//./
....../......././.|...................|\\........../.\\.../-...\\..........\\.-..|\\../...........\\....\\..|.....\\..
...............\\.../..../.................\\.......-...........\\..|..................\\\\................./.\\....
............-..........-......................|.......|..|....................-......|......\\...........|.....
...............\\......|.-............./............\\.../.............-|........./...............\\|\\.....|.....
.\\...............|.................|...........\\......\\................\\............\\.|...\\......./...........
\\...|..............-..........|...................|....-.....\\......../..........................\\........|..|
.........|........./.........|....-........-...................../|./.--.......\\........................-..../
..........................-.....-...............-/............................--...../........................
.....................-.\\../\\..........|.....................\\.......\\.../..........|.............\\............
......................../..\\.......\\...............................................\\./........................
....|......\\..|\\.-........../......................\\|........\\...............\\.................|..............
............................./.....|..|............-...\\.........-...\\....|......\\.............-..|...........
..................-......-.....................-...........-......\\...-|-.-................\\............|/....
...|....../............../..\\.......................-....\\...|.....\\..|..\\......./.................-.....-....
.........-........|........../..-................................./....-.................-....................
.............................-.......\\...............\\.....|......-....-.../.................\\................
...../......|...................|..............-........./.............\\...\\....|.............\\.......|.......
.......|............./........./......\\..../........|...........\\................................-............
/...|././.......|-.|..........|................................/\\.\\.......-......-........-........\\..........
../................./|.-...\\........................|........|........|...\\|.\\........................./.....-
................-.........../|..............|.|/...|\\...........-.......................-..|../...............
./..||........|....../........................|.................................../..............\\..|./-......
/..-...../......................................\\-...........-..................\\|................../.........
.............|.-......................|................-../.................-............../..............-...
-.....-|-...............\\..........-...........\\.......\\........................\\.........../..../...../......
.-..................../..........|.--.............................-..-....|.\\................|....|...\\......\\
......./.-........................................\\....|........|...../...........|...\\|..-...................
\\...............|........|.......\\|..-..|...-..|-........|........./.\\........................................
/.|./....|....-...../\\..|...............................-.../........./.............-|.........-..../.-..\\....
../......./...../..|........|../.....\\....\\.............-.-.................-...\\.......|.\\...........\\.......
...-........./.............../..................\\.|................/..//..................|.......-..\\......-.
./.............../.-..\\..........|.............-....................-....-..|...........-.....................
...........|-..|........................................./\\............./-.../.................\\........\\.....
................................/...........................\\.....................|.|.........................
.........|............\\........................................-...../..........|........../.../......\\...\\...
../.........|......./..................|........\\.../.\\.-...-......../../\\......../................../........
.-........./.........|....|.|.............................................|.\\............/../.................
./.........................................\\....../................../.--.....-..../.....|./.-......|.......\\.
.\\..................../.-........|.........\\............\\...........\\...............|-../................\\....
........................|......./.-....-....\\.|...................-......-..........|........\\.........../...|
.............-......./.../......................\\.......\\............/......................................|.
............-..........................-..................-.......\\--......-.....-.......|..\\..-....|........\\
...............|.......\\......|....................\\.....................-.../.|......|................../....
---..\\-.../.........//....\\../....|........\\....|-.........-.....|..........-|..............|...../..........|
......-.............................-.........................-.........../...../.|.../................-.....|
.........-.........\\..............|....\\..............-......\\......../......\\.......-\\........-.............\\
.................../......................|......|.....\\..........................-..-......./....-.....-.....
...\\.....................-..-....\\.......././....\\......./...........................\\..............\\\\........
.................|................./.....................\\...../.\\.................\\.........|...|....|.......
./............-........................\\..|...-............................./............./..\\................
-............-..............|.................-..............................-..............................\\.
................................/.....\\........|....-.....||............/.|.............-..|....|....-........
/.........|............-./...|././..............\\./-............/......../\\.\\..././../..\\..\\..............-...
..../.....................\\.........|......-...........|...\\/..........//\\.......//....-...|/.....\\..\\........
../............................/...././...-....-............./.|..\\..............|...../.........-.....\\....|.
.................................\\..../...-.....-.....-....|..\\.\\...../....../.............../.\\..............
..................|..|.......-......\\.../....../....................................................|.......-.
-./.....|...\\.....\\../.......\\..........................\\.....|.............|...................|.\\.../.../\\..
..................-.....\\.............|...|.........-..-............................../............/..|.......
.....................\\..../.....|......................................\\.\\............|/....................\\.
.....-..\\.........-....\\..............-..........................\\.....\\....................\\.........\\.....-.
\\...\\|\\...../.\\............................\\........-.........................../.......-............\\........
.............................................-......\\.............|..../.......|......../.....................
/.........-............./......|................-........-.............|...-..../.....\\.\\....\\................
''')